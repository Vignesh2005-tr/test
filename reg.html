<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GODX Guild Apply</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body style="text-align:center;">
  <h1>ğ—šğ—¨ğ—œğ—Ÿğ—— ğ—¥ğ—˜ğ—¤ğ—¨ğ—œğ—¥ğ—˜ğ— ğ—˜ğ—¡ğ—§ â€“ ğ—šğ—¢ğ——X ğ—˜ğ—¦ğ—£ğ—¢ğ—¥ğ—§ğ—¦</h1>
  <h2>ğğ…ğ…ğˆğ‚ğˆğ€ğ‹ ğ†ğ”ğˆğ‹ğƒ ğğ… ğ†ğğƒğŸ’ğŸ’ğŸ’</h2>
  <img src="image/god444.jpg" style="width:150px; height:150px; border-radius:50%; object-fit:cover;">
  <h4>GODX ESPORTS â€“ APPLY</h4>

  <form id="GuildFORM" enctype="multipart/form-data" method="POST" action="http://localhost:3000/apply">
    <table border="1" style="margin:auto;">
      <tr><td>NAME</td><td><input type="text" name="pname" required></td></tr>
      <tr><td>DISCORD USER ID</td><td><input type="text" name="discordId" placeholder="Enable Dev Mode â†’ Copy ID" required></td></tr>
      <tr><td>AGE</td><td><input type="number" name="age" required></td></tr>
      <tr><td>FREEFIRE EXPERIENCE</td><td><input type="text" name="experience" required></td></tr>
      <tr><td>ROLE</td><td>
        <label><input type="checkbox" name="role[]" value="Rusher"> Rusher</label><br>
        <label><input type="checkbox" name="role[]" value="Sniper"> Sniper</label><br>
        <label><input type="checkbox" name="role[]" value="All Rounder"> All Rounder</label>
      </td></tr>
      <tr><td>DEVICE</td><td>
        <label><input type="checkbox" name="device[]" value="Mobile"> Mobile</label><br>
        <label><input type="checkbox" name="device[]" value="PC"> PC</label>
      </td></tr>
      <tr><td>DISCORD PROFILE IMAGE</td><td><input type="file" name="discord_pic"></td></tr>
    </table><br>
     <button type="submit" class="submit-btn">
  <span class="btn-text">SUBMIT</span>
  <span class="loader"></span>
</button>

    </form>

<script>
  const form = document.getElementById("GuildFORM");
  const submitBtn = document.querySelector(".submit-btn");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    submitBtn.classList.add("loading");

    const fd = new FormData(form);

    try {
      const res = await fetch("http://localhost:5000/apply", {
        method: "POST",
        body: fd
      });

      const data = await res.json();

      submitBtn.classList.remove("loading");

      if (data.success) {
        alert("âœ… Application Submitted & Role Granted!");
        form.reset();
      } else {
        alert("âŒ Error: " + data.message);
      }

    } catch (err) {
      submitBtn.classList.remove("loading");
      alert("âŒ Cannot connect to server. Is server.js running?");
      console.error(err);
    }
  });
</script>

</body>
</html>